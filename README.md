## stream-utils
Video from rpi4 streamed to somewhat bigger computer with audio card. All audio processed through jackd server.
Most scripts started by schedule by mqtt command from homeassistant. Video stream concatenated with audio from jackd, saved to disk and streamed to twitch.

### scripts that run from systemd via `streamutil@.service`:

- `audio.sh` watch for wav files from gate recorder, normalize volume, encode in flac for archive, make png spectrogram and opus audio for telegram
- `genpng.sh` generate png with outside temperature, iso and exposure correction values for video overlay in twitch stream
- `mqtt.sh` listen for mqtt messages from homeassistant and run necessary services
- `savepi*.sh` save network video stream from rpi4 and retranslate locally for twitch.sh
- `twitch.sh` stream from localhost to twitch
- `yu.sh` upload to youtube videos made by [mpv-slice.sh](https://github.com/yekm/etc/blob/home/bin/mpv-slice.sh)
- `audio_rec.sh` dump jack audio in opus file
- `gaterec.sh` run gate recorder
- `raspivid.sh` run raspivid on raspberry pi 4 with hqcam

### utility scripts

- `catday.sh` submit specially selected files to [ffmpeg_xfade.sh](https://github.com/yekm/etc/blob/home/bin/ffmpeg_xfade.sh)
- `rename.py` renames files generated by `savepi.sh` and `mpv-slice.sh`, so that 2021-11-12_01:02.mkv-at-03:04:46.247.mp4 becomes 2021-11-12_04:06.mp4, runs `slice_fixup.sh`
- `slice_fixup.sh` normalize audio valume in video file
